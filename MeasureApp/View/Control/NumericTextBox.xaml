<UserControl x:Class="MeasureApp.View.Control.NumericTextBox"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:hc="https://handyorg.github.io/handycontrol"
             xmlns:local="clr-namespace:MeasureApp.View.Control"
             d:DataContext="{d:DesignInstance Type=local:NumericTextBox}"
             mc:Ignorable="d" 
             d:DesignHeight="30" d:DesignWidth="100">
    <UserControl.Resources>
        <Style x:Key="SelectorButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Foreground" Value="Gray"/>
            <Setter Property="Height" Value="14"/>
            <Setter Property="Width" Value="10"/>
            <Setter Property="FontFamily" Value="Consolas"/>
            <Setter Property="FontSize" Value="10"/>
        </Style>
        <Style x:Key="HexSelectorStyle" TargetType="Button" BasedOn="{StaticResource SelectorButtonStyle}">
            <Setter Property="Width" Value="20"/>
            <Setter Property="FontFamily" Value="Consolas"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=CurrentBase, RelativeSource={RelativeSource AncestorType=local:NumericTextBox}}" Value="{x:Static local:NumericBase.Hex}">
                    <Setter Property="Foreground" Value="{DynamicResource PrimaryBrush}"/>
                    <Setter Property="FontWeight" Value="Bold"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="DecSelectorStyle" TargetType="Button" BasedOn="{StaticResource SelectorButtonStyle}">
            <Setter Property="Width" Value="20"/>
            <Setter Property="FontFamily" Value="Consolas"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=CurrentBase, RelativeSource={RelativeSource AncestorType=local:NumericTextBox}}" Value="{x:Static local:NumericBase.Dec}">
                    <Setter Property="Foreground" Value="{DynamicResource PrimaryBrush}"/>
                    <Setter Property="FontWeight" Value="Bold"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="NumericTextBoxStyle" TargetType="hc:TextBox" BasedOn="{StaticResource TextBox.Small}">
            <Setter Property="BorderThickness" Value="0"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=CurrentBase, RelativeSource={RelativeSource AncestorType=local:NumericTextBox}}" Value="{x:Static local:NumericBase.Dec}">
                    <Setter Property="hc:InfoElement.Placeholder" Value="DEC"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Path=CurrentBase, RelativeSource={RelativeSource AncestorType=local:NumericTextBox}}" Value="{x:Static local:NumericBase.Hex}">
                    <Setter Property="hc:InfoElement.Placeholder" Value="HEX"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>
    <Border BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1" CornerRadius="2">
        <Grid Grid.Column="0" Background="{DynamicResource RegionBrush}" Margin="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <StackPanel Grid.Column="0" VerticalAlignment="Center" Margin="0,0">
                <Button Content="HEX"
                        Command="{Binding Path=SelectHexCommand, RelativeSource={RelativeSource AncestorType=local:NumericTextBox}}"
                        Style="{StaticResource HexSelectorStyle}"/>
                <Button Content="DEC"
                        Command="{Binding Path=SelectDecCommand, RelativeSource={RelativeSource AncestorType=local:NumericTextBox}}"
                        Style="{StaticResource DecSelectorStyle}"/>
                </StackPanel>
            <Border Grid.Column="1" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1,0,1,0">
                <hc:TextBox Text="{Binding Path=DisplayText, RelativeSource={RelativeSource AncestorType=local:NumericTextBox}, UpdateSourceTrigger=PropertyChanged}"
                            Style="{StaticResource NumericTextBoxStyle}"
                            VerticalContentAlignment="Center"/>
            </Border>
            <StackPanel Grid.Column="2" VerticalAlignment="Center" Margin="0,0">
                <Button Content="H"
                              Command="{Binding Path=Set1Command, RelativeSource={RelativeSource AncestorType=local:NumericTextBox}}"
                              Style="{StaticResource SelectorButtonStyle}"/>
                <Button Content="L"
                              Command="{Binding Path=Set0Command, RelativeSource={RelativeSource AncestorType=local:NumericTextBox}}"
                              Style="{StaticResource SelectorButtonStyle}"/>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>
